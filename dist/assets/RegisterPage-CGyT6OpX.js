import{aD as l,ag as T,j as r,aA as q,r as c,n as p,P as z,T as x,az as B,aB as D}from"./index-0-uk0NCG.js";import{A as S}from"./Alert-C2doRBmb.js";import{T as d,B as H}from"./TextField-CKuF7KSQ.js";import"./useSlot-BqIbSbz0.js";import"./Close-CjSUbPKF.js";const i="/api/users",u=()=>{const t=window.localStorage.getItem("loggedInUser");return t?{headers:{Authorization:`Bearer ${JSON.parse(t).token}`}}:{}},O=async()=>(await l.get(i,u())).data,R=async t=>(await l.post(i,t)).data,k=async t=>(await l.get(`${i}/${t}`,u())).data,E=async()=>(await l.get(`${i}/me/profile`,u())).data,N=async t=>(await l.put(`${i}/me/profile`,t,u())).data,F=async t=>(await l.post(`${i}/me/achievements`,t,u())).data,J=async t=>(await l.put(`${i}/me/personal-bests`,t,u())).data,V={getAllUsers:O,createUser:R,findUser:k,getMyProfile:E,updateMyProfile:N,unlockAchievement:F,updatePersonalBests:J},Z=T(r.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),e={bgDark:"#0d0d0d",bgCard:"#1a1a1a",accent:"#de6c2c",accentHover:"#ff7c3c",textPrimary:"#e5e5e5",textSecondary:"#888888",border:"rgba(255,255,255,0.08)",green:"#4ade80",red:"#ef4444"},_=()=>{const t=q(),[s,P]=c.useState(""),[b,j]=c.useState(""),[n,I]=c.useState(""),[g,A]=c.useState(""),[f,L]=c.useState(""),[m,a]=c.useState(""),[h,y]=c.useState(""),[v,C]=c.useState(!1),U=async o=>{var M,w;if(o.preventDefault(),a(""),y(""),!s||!b||!n||!f){a("All fields are required");return}if(s.length<3){a("Username must be at least 3 characters");return}if(n.length<8){a("Password must be at least 8 characters");return}if(n!==g){a("Passwords do not match");return}if(!/[A-Z]/.test(n)){a("Password must contain at least one uppercase letter");return}if(!/[a-z]/.test(n)){a("Password must contain at least one lowercase letter");return}if(!/[0-9]/.test(n)){a("Password must contain at least one number");return}C(!0);try{await V.createUser({username:s,name:b,password:n,inviteCode:f}),y("Account created successfully! Redirecting to login..."),setTimeout(()=>t("/login"),2e3)}catch(W){const $=((w=(M=W.response)==null?void 0:M.data)==null?void 0:w.error)||"Registration failed";a($)}finally{C(!1)}};return r.jsx(p,{sx:{minHeight:"100vh",bgcolor:e.bgDark,display:"flex",justifyContent:"center",alignItems:"center",p:2},children:r.jsxs(z,{sx:{bgcolor:e.bgCard,border:`1px solid ${e.border}`,borderRadius:2,p:4,maxWidth:400,width:"100%"},children:[r.jsxs(p,{sx:{textAlign:"center",mb:3},children:[r.jsx(Z,{sx:{fontSize:48,color:e.accent,mb:1}}),r.jsx(x,{variant:"h4",sx:{color:e.textPrimary,fontWeight:700},children:"Create Account"}),r.jsx(x,{variant:"body2",sx:{color:e.textSecondary,mt:1},children:"Enter your invite code to register"})]}),m&&r.jsx(S,{severity:"error",sx:{mb:2,bgcolor:"rgba(239,68,68,0.1)",color:e.red},children:m}),h&&r.jsx(S,{severity:"success",sx:{mb:2,bgcolor:"rgba(74,222,128,0.1)",color:e.green},children:h}),r.jsxs("form",{onSubmit:U,children:[r.jsx(d,{fullWidth:!0,label:"Invite Code",value:f,onChange:o=>L(o.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),r.jsx(d,{fullWidth:!0,label:"Username",value:s,onChange:o=>P(o.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),r.jsx(d,{fullWidth:!0,label:"Display Name",value:b,onChange:o=>j(o.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),r.jsx(d,{fullWidth:!0,type:"password",label:"Password",value:n,onChange:o=>I(o.target.value),helperText:"Min 8 chars, uppercase, lowercase, number",sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent},"& .MuiFormHelperText-root":{color:e.textSecondary}},required:!0}),r.jsx(d,{fullWidth:!0,type:"password",label:"Confirm Password",value:g,onChange:o=>A(o.target.value),sx:{mb:3,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),r.jsx(H,{type:"submit",fullWidth:!0,variant:"contained",disabled:v,sx:{bgcolor:e.accent,color:"#fff",py:1.5,fontWeight:600,"&:hover":{bgcolor:e.accentHover},"&.Mui-disabled":{bgcolor:e.border,color:e.textSecondary}},children:v?r.jsx(B,{size:24,sx:{color:"#fff"}}):"Create Account"})]}),r.jsx(p,{sx:{mt:3,textAlign:"center"},children:r.jsxs(x,{variant:"body2",sx:{color:e.textSecondary},children:["Already have an account?"," ",r.jsx(D,{to:"/login",style:{color:e.accent,textDecoration:"none"},children:"Login here"})]})})]})})};export{_ as default};
