import{t as v,j as e,r as j,m as l,T as a,C as W,i as te,k as R,o as re,v as se,ag as ae,P as f}from"./index-DQ7DBUfa.js";import{C as H,a as T,T as oe,G as x,L as ie}from"./Tooltip-DKU6jB2J.js";import{A as P}from"./Alert-47wkjRIH.js";import{A as ne}from"./Avatar-CZt_E_wj.js";import{R as M,X as I,Y as D,T as F,B as ce,a as le}from"./BarChart-CPEDWyq6.js";import{R as de,P as xe,a as he,b as me,c as pe,A as je,d as ue}from"./AreaChart-Ck8F5-pp.js";import{W as be,T as y,F as G,a as L,S as ge}from"./Whatshot-DxzYoSNe.js";import{C as K}from"./CartesianGrid-BUu6Ny-M.js";import"./useSlot-BeHqUjYd.js";import"./Close-idluFisN.js";const fe=v(e.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),E=v(e.jsx("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"}),"Gavel"),ye=v(e.jsx("path",{d:"M17 10.43V2H7v8.43c0 .35.18.68.49.86l4.18 2.51-.99 2.34-3.41.29 2.59 2.24L9.07 22 12 20.23 14.93 22l-.78-3.33 2.59-2.24-3.41-.29-.99-2.34 4.18-2.51c.3-.18.48-.5.48-.86m-4 1.8-1 .6-1-.6V3h2z"}),"MilitaryTech"),ve=v(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),Se=v(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),t={bgDark:"#0d0d0d",bgCard:"#1a1a1a",bgHover:"#252525",accent:"#de6c2c",accentHover:"#ff7c3c",textPrimary:"#e5e5e5",textSecondary:"#888888",border:"rgba(255,255,255,0.08)",green:"#4ade80",red:"#ef4444",gold:"#ffd700",silver:"#c0c0c0",bronze:"#cd7f32",purple:"#a855f7",blue:"#3b82f6"},$={zooze:"Turkulainen"},z=[{id:"first_blood",name:"First Blood",description:"Play your first match",icon:"gavel",tier:"bronze"},{id:"headhunter",name:"Headhunter",description:"Achieve 50%+ headshot percentage",icon:"target",tier:"silver"},{id:"terminator",name:"Terminator",description:"Get 1.5+ K/D ratio",icon:"fire",tier:"gold"},{id:"veteran",name:"Veteran",description:"Play 50+ matches",icon:"medal",tier:"silver"},{id:"centurion",name:"Centurion",description:"Play 100+ matches",icon:"trophy",tier:"gold"},{id:"hot_streak",name:"Hot Streak",description:"Win 5 matches in a row",icon:"fire",tier:"silver"},{id:"consistent",name:"Consistent",description:"Maintain 1.0+ K/D for 10 matches",icon:"chart",tier:"silver"},{id:"damage_dealer",name:"Damage Dealer",description:"Average 80+ ADR",icon:"fire",tier:"silver"}],ke={bronze:t.bronze,silver:t.silver,gold:t.gold},Ce=b=>({gavel:e.jsx(E,{}),target:e.jsx(y,{}),fire:e.jsx(G,{}),star:e.jsx(ge,{}),shield:e.jsx(Se,{}),medal:e.jsx(ye,{}),trophy:e.jsx(y,{}),chart:e.jsx(L,{})})[b]||e.jsx(y,{}),S=j.memo(function({title:d,value:m,subtitle:h,icon:u,color:o}){return e.jsx(H,{sx:{bgcolor:t.bgCard,border:`1px solid ${t.border}`,borderRadius:2,height:"100%",transition:"all 0.2s","&:hover":{bgcolor:t.bgHover,borderColor:o||t.accent}},children:e.jsx(T,{sx:{p:2.5},children:e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(l,{children:[e.jsx(a,{variant:"body2",sx:{color:t.textSecondary,mb:.5},children:d}),e.jsx(a,{variant:"h4",sx:{color:o||t.textPrimary,fontWeight:700,fontFamily:"monospace"},children:m}),h&&e.jsx(a,{variant:"caption",sx:{color:t.textSecondary},children:h})]}),e.jsx(l,{sx:{color:o||t.accent,opacity:.7,"& svg":{fontSize:32}},children:u})]})})})}),Ae=j.memo(function({achievement:d,unlocked:m}){const h=ke[d.tier]||t.bronze;return e.jsx(oe,{title:m?"Unlocked!":"Not yet unlocked",children:e.jsxs(H,{sx:{bgcolor:m?t.bgCard:"rgba(26,26,26,0.5)",border:`1px solid ${m?h:t.border}`,borderRadius:2,opacity:m?1:.5,transition:"all 0.3s",position:"relative","&:hover":m?{transform:"translateY(-2px)",boxShadow:`0 4px 20px ${h}40`}:{}},children:[m&&e.jsx(l,{sx:{position:"absolute",top:-8,right:-8,bgcolor:h,borderRadius:"50%",p:.5,display:"flex"},children:e.jsx(fe,{sx:{fontSize:14,color:"#000"}})}),e.jsxs(T,{sx:{p:2,textAlign:"center"},children:[e.jsx(l,{sx:{color:m?h:t.textSecondary,mb:1,"& svg":{fontSize:36}},children:Ce(d.icon)}),e.jsx(a,{variant:"body2",sx:{color:m?t.textPrimary:t.textSecondary,fontWeight:600,mb:.5},children:d.name}),e.jsx(a,{variant:"caption",sx:{color:t.textSecondary,display:"block",lineHeight:1.3},children:d.description}),e.jsx(W,{label:d.tier.toUpperCase(),size:"small",sx:{mt:1,bgcolor:`${h}20`,color:h,fontWeight:600,fontSize:"0.65rem",height:20}})]})]})})});function We(){const b=te(),d=R(r=>r.user.user),m=R(r=>r.stats.players),h=R(r=>r.stats.playerStats),u=j.useMemo(()=>{if(!(d!=null&&d.username))return null;const r=d.username.toLowerCase();if($[r])return $[r];const c=m.find(n=>{var g;return((g=n.nickname)==null?void 0:g.toLowerCase())===r});return(c==null?void 0:c.nickname)||null},[d,m]),o=j.useMemo(()=>Array.isArray(h==null?void 0:h.details)?[...h.details]:[],[h]);j.useEffect(()=>{b(re())},[b]),j.useEffect(()=>{u&&b(se(u))},[u,b]);const s=j.useMemo(()=>{if(o.length===0)return null;const r=o.length,c=o.filter(i=>i.win).length,n=o.reduce((i,p)=>i+(parseInt(p.kills)||0),0),g=o.reduce((i,p)=>i+(parseInt(p.deaths)||0),0),C=o.reduce((i,p)=>i+(parseInt(p.assists)||0),0),U=o.reduce((i,p)=>i+(parseInt(p.headshotKills)||0),0),O=o.reduce((i,p)=>i+(parseFloat(p.adr)||0),0),Y=r>0?O/r:0,N=g>0?n/g:n,X=n>0?U/n*100:0,q=r>0?c/r*100:0;let A=0,w=0;const J=[...o].sort((i,p)=>new Date(p.date)-new Date(i.date));for(const i of J)i.win?(A++,w=Math.max(w,A)):A=0;const Q=Math.max(...o.map(i=>parseInt(i.kills)||0)),Z=Math.max(...o.map(i=>{const p=parseInt(i.kills)||0,ee=parseInt(i.deaths)||1;return p/ee}));return{matches:r,wins:c,losses:r-c,winRate:q.toFixed(1),kd:N.toFixed(2),kills:n,deaths:g,assists:C,adr:Y.toFixed(1),hsPercent:X.toFixed(1),maxStreak:w,bestKills:Q,bestKD:Z.toFixed(2)}},[o]),k=j.useMemo(()=>{if(!s)return new Set;const r=new Set;return s.matches>=1&&r.add("first_blood"),parseFloat(s.hsPercent)>=50&&r.add("headhunter"),parseFloat(s.kd)>=1.5&&r.add("terminator"),s.matches>=50&&r.add("veteran"),s.matches>=100&&r.add("centurion"),s.maxStreak>=5&&r.add("hot_streak"),parseFloat(s.kd)>=1&&s.matches>=10&&r.add("consistent"),parseFloat(s.adr)>=80&&r.add("damage_dealer"),r},[s]),B=j.useMemo(()=>s?[{stat:"K/D",value:Math.min(parseFloat(s.kd)*50,100)},{stat:"ADR",value:Math.min(parseFloat(s.adr)/1.2,100)},{stat:"HS%",value:parseFloat(s.hsPercent)},{stat:"Win%",value:parseFloat(s.winRate)},{stat:"Matches",value:Math.min(s.matches,100)},{stat:"Streak",value:Math.min(s.maxStreak*10,100)}]:[],[s]),V=j.useMemo(()=>o.length===0?[]:o.slice(0,15).reverse().map((r,c)=>{const n=parseInt(r.kills)||0,g=parseInt(r.deaths)||1,C=n/Math.max(g,1);return{match:r.map?r.map.replace("de_","").substring(0,5):`#${c+1}`,kd:parseFloat(C.toFixed(2)),kills:n,win:r.win?1:0}}),[o]),_=j.useMemo(()=>{if(o.length===0)return[];const r={};return o.forEach(c=>{const n=c.map||"Unknown";r[n]||(r[n]={map:n,wins:0,losses:0,matches:0}),r[n].matches++,c.win?r[n].wins++:r[n].losses++}),Object.values(r).map(c=>({...c,winRate:(c.wins/c.matches*100).toFixed(0)})).sort((c,n)=>n.matches-c.matches).slice(0,6)},[o]);return d?e.jsxs(l,{sx:{p:3,maxWidth:1400,mx:"auto"},children:[e.jsx(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,flexWrap:"wrap",gap:2},children:e.jsxs(l,{children:[e.jsxs(a,{variant:"h4",sx:{color:t.textPrimary,fontWeight:700,display:"flex",alignItems:"center",gap:2},children:[e.jsx(ve,{sx:{color:t.accent}}),"My Stats"]}),e.jsx(a,{variant:"body2",sx:{color:t.textSecondary,mt:1},children:"Your personal performance dashboard"})]})}),s?e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(f,{sx:{bgcolor:t.bgCard,border:`1px solid ${t.border}`,borderRadius:2,p:3,height:"100%"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(ne,{sx:{width:64,height:64,bgcolor:t.accent,fontSize:24,fontWeight:700},children:u==null?void 0:u.charAt(0).toUpperCase()}),e.jsxs(l,{children:[e.jsx(a,{variant:"h6",sx:{color:t.textPrimary,fontWeight:600},children:u}),e.jsx(W,{label:`${s.matches} matches`,size:"small",sx:{bgcolor:`${t.accent}20`,color:t.accent}})]})]}),e.jsxs(l,{sx:{mb:2},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(a,{variant:"body2",sx:{color:t.textSecondary},children:"Achievement Progress"}),e.jsxs(a,{variant:"body2",sx:{color:t.accent},children:[k.size,"/",z.length]})]}),e.jsx(ie,{variant:"determinate",value:k.size/z.length*100,sx:{height:8,borderRadius:4,bgcolor:t.border,"& .MuiLinearProgress-bar":{bgcolor:t.accent,borderRadius:4}}})]}),e.jsx(a,{variant:"body2",sx:{color:t.textSecondary,mb:1},children:"Personal Bests"}),e.jsxs(x,{container:!0,spacing:1,children:[e.jsx(x,{item:!0,xs:6,children:e.jsxs(l,{sx:{p:1.5,bgcolor:t.bgHover,borderRadius:1,textAlign:"center"},children:[e.jsx(a,{variant:"h6",sx:{color:t.gold,fontWeight:700},children:s.bestKills}),e.jsx(a,{variant:"caption",sx:{color:t.textSecondary},children:"Most Kills"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(l,{sx:{p:1.5,bgcolor:t.bgHover,borderRadius:1,textAlign:"center"},children:[e.jsx(a,{variant:"h6",sx:{color:t.gold,fontWeight:700},children:s.bestKD}),e.jsx(a,{variant:"caption",sx:{color:t.textSecondary},children:"Best K/D"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(l,{sx:{p:1.5,bgcolor:t.bgHover,borderRadius:1,textAlign:"center"},children:[e.jsx(a,{variant:"h6",sx:{color:t.gold,fontWeight:700},children:s.maxStreak}),e.jsx(a,{variant:"caption",sx:{color:t.textSecondary},children:"Win Streak"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(l,{sx:{p:1.5,bgcolor:t.bgHover,borderRadius:1,textAlign:"center"},children:[e.jsx(a,{variant:"h6",sx:{color:t.gold,fontWeight:700},children:s.assists}),e.jsx(a,{variant:"caption",sx:{color:t.textSecondary},children:"Total Assists"})]})})]})]})}),e.jsx(x,{item:!0,xs:12,md:8,children:e.jsxs(f,{sx:{bgcolor:t.bgCard,border:`1px solid ${t.border}`,borderRadius:2,p:3},children:[e.jsx(a,{variant:"h6",sx:{color:t.textPrimary,mb:2},children:"Performance Profile"}),e.jsx(M,{width:"100%",height:280,children:e.jsxs(de,{data:B,children:[e.jsx(xe,{stroke:t.border}),e.jsx(he,{dataKey:"stat",tick:{fill:t.textSecondary,fontSize:12}}),e.jsx(me,{angle:30,domain:[0,100],tick:{fill:t.textSecondary,fontSize:10}}),e.jsx(pe,{name:"Stats",dataKey:"value",stroke:t.accent,fill:t.accent,fillOpacity:.3})]})})]})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsx(S,{title:"K/D Ratio",value:s.kd,subtitle:`${s.kills}K / ${s.deaths}D`,icon:e.jsx(E,{}),color:parseFloat(s.kd)>=1?t.green:t.red})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsx(S,{title:"Headshot %",value:`${s.hsPercent}%`,icon:e.jsx(be,{}),color:t.accent})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsx(S,{title:"Win Rate",value:`${s.winRate}%`,subtitle:`${s.wins}W / ${s.losses}L`,icon:e.jsx(y,{}),color:parseFloat(s.winRate)>=50?t.green:t.red})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsx(S,{title:"ADR",value:s.adr,subtitle:"Avg Damage/Round",icon:e.jsx(G,{}),color:t.blue})}),e.jsx(x,{item:!0,xs:12,md:8,children:e.jsxs(f,{sx:{bgcolor:t.bgCard,border:`1px solid ${t.border}`,borderRadius:2,p:3},children:[e.jsxs(a,{variant:"h6",sx:{color:t.textPrimary,mb:2},children:[e.jsx(L,{sx:{mr:1,verticalAlign:"middle",color:t.green}}),"Recent Form (Last 15 Matches)"]}),e.jsx(M,{width:"100%",height:200,children:e.jsxs(je,{data:V,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"formGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:t.accent,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:t.accent,stopOpacity:0})]})}),e.jsx(K,{strokeDasharray:"3 3",stroke:t.border}),e.jsx(I,{dataKey:"match",tick:{fill:t.textSecondary,fontSize:10}}),e.jsx(D,{tick:{fill:t.textSecondary,fontSize:10},domain:[0,"auto"]}),e.jsx(F,{contentStyle:{backgroundColor:t.bgCard,border:`1px solid ${t.border}`,borderRadius:8}}),e.jsx(ue,{type:"monotone",dataKey:"kd",stroke:t.accent,fill:"url(#formGrad)",strokeWidth:2,name:"K/D"})]})})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(f,{sx:{bgcolor:t.bgCard,border:`1px solid ${t.border}`,borderRadius:2,p:3},children:[e.jsx(a,{variant:"h6",sx:{color:t.textPrimary,mb:2},children:"Map Performance"}),e.jsx(M,{width:"100%",height:200,children:e.jsxs(ce,{data:_,layout:"vertical",children:[e.jsx(K,{strokeDasharray:"3 3",stroke:t.border}),e.jsx(I,{type:"number",domain:[0,100],tick:{fill:t.textSecondary,fontSize:10}}),e.jsx(D,{dataKey:"map",type:"category",tick:{fill:t.textSecondary,fontSize:10},width:60}),e.jsx(F,{contentStyle:{backgroundColor:t.bgCard,border:`1px solid ${t.border}`,borderRadius:8},formatter:r=>[`${r}%`,"Win Rate"]}),e.jsx(le,{dataKey:"winRate",fill:t.accent,radius:[0,4,4,0]})]})})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(f,{sx:{bgcolor:t.bgCard,border:`1px solid ${t.border}`,borderRadius:2,p:3},children:[e.jsxs(a,{variant:"h6",sx:{color:t.textPrimary,mb:3},children:[e.jsx(y,{sx:{mr:1,verticalAlign:"middle",color:t.accent}}),"Achievements"]}),e.jsx(x,{container:!0,spacing:2,children:z.map(r=>e.jsx(x,{item:!0,xs:6,sm:4,md:3,lg:2,children:e.jsx(Ae,{achievement:r,unlocked:k.has(r.id)})},r.id))})]})})]}):e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"40vh"},children:d?u?e.jsx(ae,{sx:{color:t.accent}}):e.jsxs(P,{severity:"info",children:['No player data found for "',d.username,'". Contact admin to add your alias.']}):e.jsx(P,{severity:"warning",children:"Please log in to view your stats"})})]}):e.jsx(l,{sx:{p:4,textAlign:"center"},children:e.jsx(P,{severity:"info",children:"Please log in to view your stats dashboard."})})}export{We as default};
