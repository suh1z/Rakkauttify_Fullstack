import{k as M,j as e,r as m,B as l,T as o,C as O,u as je,a as C,b as ge,i as ue,f as fe,m as ye,a0 as ve,P as v,I as Se,e as Ce,l as ke,g as Me}from"./index-CTDm1AW-.js";import{H as B,a as Ae,D as Pe,b as Re,c as we,M as ze,d as De}from"./MatchStats-CBFYqqv7.js";import{a as Y,b as N,c as X,G as x,L as Ie,T as y}from"./TablePagination-CXeGVe8F.js";import{A as T}from"./Alert-D9APkT5z.js";import{A as Te}from"./Avatar-CnDzLJHh.js";import{R as $,X as _,Y as L,T as G,B as $e,a as Fe}from"./BarChart-CF1xYVN_.js";import{R as We,P as He,a as Ke,b as Be,c as _e,A as Le,d as Ge}from"./AreaChart-B8UMeVvG.js";import{W as Ee,T as k,F as q,a as J,S as Ue}from"./Whatshot-DZ62dMJy.js";import{C as E}from"./CartesianGrid-CrIwoMui.js";import{T as Ve,a as Oe,b as Ye,c as U,d as Ne}from"./TableRow-DMOF-0gc.js";import{B as Xe}from"./TextField-BcQyfcts.js";import"./DataGrid-N3AnG-XP.js";import"./Select-BdX5m7oo.js";import"./useSlot-iAVGiLGH.js";const qe=M(e.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),Q=M(e.jsx("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"}),"Gavel"),Je=M(e.jsx("path",{d:"M17 10.43V2H7v8.43c0 .35.18.68.49.86l4.18 2.51-.99 2.34-3.41.29 2.59 2.24L9.07 22 12 20.23 14.93 22l-.78-3.33 2.59-2.24-3.41-.29-.99-2.34 4.18-2.51c.3-.18.48-.5.48-.86m-4 1.8-1 .6-1-.6V3h2z"}),"MilitaryTech"),Qe=M(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),Ze=M(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),r={bgDark:"#0d0d0d",bgCard:"#1a1a1a",bgHover:"#252525",accent:"#de6c2c",accentHover:"#ff7c3c",textPrimary:"#e5e5e5",textSecondary:"#888888",border:"rgba(255,255,255,0.08)",green:"#4ade80",red:"#ef4444",gold:"#ffd700",silver:"#c0c0c0",bronze:"#cd7f32",purple:"#a855f7",blue:"#3b82f6"},V={zooze:"Turkulainen"},F=[{id:"first_blood",name:"First Blood",description:"Play your first match",icon:"gavel",tier:"bronze"},{id:"headhunter",name:"Headhunter",description:"Achieve 50%+ headshot percentage",icon:"target",tier:"silver"},{id:"terminator",name:"Terminator",description:"Get 1.5+ K/D ratio",icon:"fire",tier:"gold"},{id:"veteran",name:"Veteran",description:"Play 50+ matches",icon:"medal",tier:"silver"},{id:"centurion",name:"Centurion",description:"Play 100+ matches",icon:"trophy",tier:"gold"},{id:"hot_streak",name:"Hot Streak",description:"Win 5 matches in a row",icon:"fire",tier:"silver"},{id:"consistent",name:"Consistent",description:"Maintain 1.0+ K/D for 10 matches",icon:"chart",tier:"silver"},{id:"damage_dealer",name:"Damage Dealer",description:"Average 80+ ADR",icon:"fire",tier:"silver"}],er={bronze:r.bronze,silver:r.silver,gold:r.gold},rr=p=>({gavel:e.jsx(Q,{}),target:e.jsx(k,{}),fire:e.jsx(q,{}),star:e.jsx(Ue,{}),shield:e.jsx(Ze,{}),medal:e.jsx(Je,{}),trophy:e.jsx(k,{}),chart:e.jsx(J,{})})[p]||e.jsx(k,{}),A=m.memo(function({title:n,value:b,subtitle:h,icon:S,color:g}){return e.jsx(Y,{sx:{bgcolor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:2,height:"100%",transition:"all 0.2s","&:hover":{bgcolor:r.bgHover,borderColor:g||r.accent}},children:e.jsx(N,{sx:{p:2.5},children:e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(l,{children:[e.jsx(o,{variant:"body2",sx:{color:r.textSecondary,mb:.5},children:n}),e.jsx(o,{variant:"h4",sx:{color:g||r.textPrimary,fontWeight:700,fontFamily:"monospace"},children:b}),h&&e.jsx(o,{variant:"caption",sx:{color:r.textSecondary},children:h})]}),e.jsx(l,{sx:{color:g||r.accent,opacity:.7,"& svg":{fontSize:32}},children:S})]})})})}),tr=m.memo(function({achievement:n,unlocked:b}){const h=er[n.tier]||r.bronze;return e.jsx(X,{title:b?"Unlocked!":"Not yet unlocked",children:e.jsxs(Y,{sx:{bgcolor:b?r.bgCard:"rgba(26,26,26,0.5)",border:`1px solid ${b?h:r.border}`,borderRadius:2,opacity:b?1:.5,transition:"all 0.3s",position:"relative","&:hover":b?{transform:"translateY(-2px)",boxShadow:`0 4px 20px ${h}40`}:{}},children:[b&&e.jsx(l,{sx:{position:"absolute",top:-8,right:-8,bgcolor:h,borderRadius:"50%",p:.5,display:"flex"},children:e.jsx(qe,{sx:{fontSize:14,color:"#000"}})}),e.jsxs(N,{sx:{p:2,textAlign:"center"},children:[e.jsx(l,{sx:{color:b?h:r.textSecondary,mb:1,"& svg":{fontSize:36}},children:rr(n.icon)}),e.jsx(o,{variant:"body2",sx:{color:b?r.textPrimary:r.textSecondary,fontWeight:600,mb:.5},children:n.name}),e.jsx(o,{variant:"caption",sx:{color:r.textSecondary,display:"block",lineHeight:1.3},children:n.description}),e.jsx(O,{label:n.tier.toUpperCase(),size:"small",sx:{mt:1,bgcolor:`${h}20`,color:h,fontWeight:600,fontSize:"0.65rem",height:20}})]})]})})});function gr(){const p=je(),n=C(t=>t.user.user),b=C(t=>t.stats.players),h=C(t=>t.stats.playerStats),S=C(t=>t.stats.matches),g=C(t=>t.user.likedMatches),[P,W]=m.useState(null),[Z,H]=m.useState(!1),u=m.useMemo(()=>{if(!(n!=null&&n.username))return null;const t=n.username.toLowerCase();if(V[t])return V[t];const i=b.find(a=>{var f;return((f=a.nickname)==null?void 0:f.toLowerCase())===t});return(i==null?void 0:i.nickname)||null},[n,b]),d=m.useMemo(()=>Array.isArray(h==null?void 0:h.details)?[...h.details]:[],[h]);m.useEffect(()=>{p(ge()),p(ue())},[p]),m.useEffect(()=>{n!=null&&n.username&&p(fe())},[p,n==null?void 0:n.username]),m.useEffect(()=>{u&&p(ye(u))},[u,p]);const s=m.useMemo(()=>{if(d.length===0)return null;const t=d.length,i=d.filter(c=>c.win).length,a=d.reduce((c,j)=>c+(parseInt(j.kills)||0),0),f=d.reduce((c,j)=>c+(parseInt(j.deaths)||0),0),z=d.reduce((c,j)=>c+(parseInt(j.assists)||0),0),ie=d.reduce((c,j)=>c+(parseInt(j.headshotKills)||0),0),ne=d.reduce((c,j)=>c+(parseFloat(j.adr)||0),0),ce=t>0?ne/t:0,le=f>0?a/f:a,de=a>0?ie/a*100:0,xe=t>0?i/t*100:0;let D=0,I=0;const he=[...d].sort((c,j)=>new Date(j.date)-new Date(c.date));for(const c of he)c.win?(D++,I=Math.max(I,D)):D=0;const me=Math.max(...d.map(c=>parseInt(c.kills)||0)),pe=Math.max(...d.map(c=>{const j=parseInt(c.kills)||0,be=parseInt(c.deaths)||1;return j/be}));return{matches:t,wins:i,losses:t-i,winRate:xe.toFixed(1),kd:le.toFixed(2),kills:a,deaths:f,assists:z,adr:ce.toFixed(1),hsPercent:de.toFixed(1),maxStreak:I,bestKills:me,bestKD:pe.toFixed(2)}},[d]),R=m.useMemo(()=>{if(!s)return new Set;const t=new Set;return s.matches>=1&&t.add("first_blood"),parseFloat(s.hsPercent)>=50&&t.add("headhunter"),parseFloat(s.kd)>=1.5&&t.add("terminator"),s.matches>=50&&t.add("veteran"),s.matches>=100&&t.add("centurion"),s.maxStreak>=5&&t.add("hot_streak"),parseFloat(s.kd)>=1&&s.matches>=10&&t.add("consistent"),parseFloat(s.adr)>=80&&t.add("damage_dealer"),t},[s]),ee=m.useMemo(()=>s?[{stat:"K/D",value:Math.min(parseFloat(s.kd)*50,100)},{stat:"ADR",value:Math.min(parseFloat(s.adr)/1.2,100)},{stat:"HS%",value:parseFloat(s.hsPercent)},{stat:"Win%",value:parseFloat(s.winRate)},{stat:"Matches",value:Math.min(s.matches,100)},{stat:"Streak",value:Math.min(s.maxStreak*10,100)}]:[],[s]),re=m.useMemo(()=>d.length===0?[]:d.slice(0,15).reverse().map((t,i)=>{const a=parseInt(t.kills)||0,f=parseInt(t.deaths)||1,z=a/Math.max(f,1);return{match:t.map?t.map.replace("de_","").substring(0,5):`#${i+1}`,kd:parseFloat(z.toFixed(2)),kills:a,win:t.win?1:0}}),[d]),te=m.useMemo(()=>{if(d.length===0)return[];const t={};return d.forEach(i=>{const a=i.map||"Unknown";t[a]||(t[a]={map:a,wins:0,losses:0,matches:0}),t[a].matches++,i.win?t[a].wins++:t[a].losses++}),Object.values(t).map(i=>({...i,winRate:(i.wins/i.matches*100).toFixed(0)})).sort((i,a)=>a.matches-i.matches).slice(0,6)},[d]),w=m.useMemo(()=>!S.length||!g.length?[]:S.filter(t=>g.includes(String(t.matchid))),[S,g]),se=t=>{if(!t)return"Unknown Teams";const i=/team_(.*?)_vs_team_(.*?)(?=\.)/,a=t.match(i);return a?`${a[1]} vs ${a[2]}`:"Unknown Teams"},ae=(t,i)=>{t.stopPropagation();const a=String(i);g.includes(a)?p(Ce(a)):p(ke(a))},oe=t=>{W(t),p(Me(t.matchid,t.url)),H(!0)},K=()=>{H(!1),W(null)};return n?e.jsxs(l,{sx:{p:3,maxWidth:1400,mx:"auto"},children:[e.jsx(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,flexWrap:"wrap",gap:2},children:e.jsxs(l,{children:[e.jsxs(o,{variant:"h4",sx:{color:r.textPrimary,fontWeight:700,display:"flex",alignItems:"center",gap:2},children:[e.jsx(Qe,{sx:{color:r.accent}}),"My Stats"]}),e.jsx(o,{variant:"body2",sx:{color:r.textSecondary,mt:1},children:"Your personal performance dashboard"})]})}),s?e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(v,{sx:{bgcolor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:2,p:3,height:"100%"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(Te,{sx:{width:64,height:64,bgcolor:r.accent,fontSize:24,fontWeight:700},children:u==null?void 0:u.charAt(0).toUpperCase()}),e.jsxs(l,{children:[e.jsx(o,{variant:"h6",sx:{color:r.textPrimary,fontWeight:600},children:u}),e.jsx(O,{label:`${s.matches} matches`,size:"small",sx:{bgcolor:`${r.accent}20`,color:r.accent}})]})]}),e.jsxs(l,{sx:{mb:2},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(o,{variant:"body2",sx:{color:r.textSecondary},children:"Achievement Progress"}),e.jsxs(o,{variant:"body2",sx:{color:r.accent},children:[R.size,"/",F.length]})]}),e.jsx(Ie,{variant:"determinate",value:R.size/F.length*100,sx:{height:8,borderRadius:4,bgcolor:r.border,"& .MuiLinearProgress-bar":{bgcolor:r.accent,borderRadius:4}}})]}),e.jsx(o,{variant:"body2",sx:{color:r.textSecondary,mb:1},children:"Personal Bests"}),e.jsxs(x,{container:!0,spacing:1,children:[e.jsx(x,{item:!0,xs:6,children:e.jsxs(l,{sx:{p:1.5,bgcolor:r.bgHover,borderRadius:1,textAlign:"center"},children:[e.jsx(o,{variant:"h6",sx:{color:r.gold,fontWeight:700},children:s.bestKills}),e.jsx(o,{variant:"caption",sx:{color:r.textSecondary},children:"Most Kills"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(l,{sx:{p:1.5,bgcolor:r.bgHover,borderRadius:1,textAlign:"center"},children:[e.jsx(o,{variant:"h6",sx:{color:r.gold,fontWeight:700},children:s.bestKD}),e.jsx(o,{variant:"caption",sx:{color:r.textSecondary},children:"Best K/D"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(l,{sx:{p:1.5,bgcolor:r.bgHover,borderRadius:1,textAlign:"center"},children:[e.jsx(o,{variant:"h6",sx:{color:r.gold,fontWeight:700},children:s.maxStreak}),e.jsx(o,{variant:"caption",sx:{color:r.textSecondary},children:"Win Streak"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(l,{sx:{p:1.5,bgcolor:r.bgHover,borderRadius:1,textAlign:"center"},children:[e.jsx(o,{variant:"h6",sx:{color:r.gold,fontWeight:700},children:s.assists}),e.jsx(o,{variant:"caption",sx:{color:r.textSecondary},children:"Total Assists"})]})})]})]})}),e.jsx(x,{item:!0,xs:12,md:8,children:e.jsxs(v,{sx:{bgcolor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:2,p:3},children:[e.jsx(o,{variant:"h6",sx:{color:r.textPrimary,mb:2},children:"Performance Profile"}),e.jsx($,{width:"100%",height:280,children:e.jsxs(We,{data:ee,children:[e.jsx(He,{stroke:r.border}),e.jsx(Ke,{dataKey:"stat",tick:{fill:r.textSecondary,fontSize:12}}),e.jsx(Be,{angle:30,domain:[0,100],tick:{fill:r.textSecondary,fontSize:10}}),e.jsx(_e,{name:"Stats",dataKey:"value",stroke:r.accent,fill:r.accent,fillOpacity:.3})]})})]})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsx(A,{title:"K/D Ratio",value:s.kd,subtitle:`${s.kills}K / ${s.deaths}D`,icon:e.jsx(Q,{}),color:parseFloat(s.kd)>=1?r.green:r.red})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsx(A,{title:"Headshot %",value:`${s.hsPercent}%`,icon:e.jsx(Ee,{}),color:r.accent})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsx(A,{title:"Win Rate",value:`${s.winRate}%`,subtitle:`${s.wins}W / ${s.losses}L`,icon:e.jsx(k,{}),color:parseFloat(s.winRate)>=50?r.green:r.red})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsx(A,{title:"ADR",value:s.adr,subtitle:"Avg Damage/Round",icon:e.jsx(q,{}),color:r.blue})}),e.jsx(x,{item:!0,xs:12,md:8,children:e.jsxs(v,{sx:{bgcolor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:2,p:3},children:[e.jsxs(o,{variant:"h6",sx:{color:r.textPrimary,mb:2},children:[e.jsx(J,{sx:{mr:1,verticalAlign:"middle",color:r.green}}),"Recent Form (Last 15 Matches)"]}),e.jsx($,{width:"100%",height:200,children:e.jsxs(Le,{data:re,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"formGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:r.accent,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:r.accent,stopOpacity:0})]})}),e.jsx(E,{strokeDasharray:"3 3",stroke:r.border}),e.jsx(_,{dataKey:"match",tick:{fill:r.textSecondary,fontSize:10}}),e.jsx(L,{tick:{fill:r.textSecondary,fontSize:10},domain:[0,"auto"]}),e.jsx(G,{contentStyle:{backgroundColor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:8}}),e.jsx(Ge,{type:"monotone",dataKey:"kd",stroke:r.accent,fill:"url(#formGrad)",strokeWidth:2,name:"K/D"})]})})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(v,{sx:{bgcolor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:2,p:3},children:[e.jsx(o,{variant:"h6",sx:{color:r.textPrimary,mb:2},children:"Map Performance"}),e.jsx($,{width:"100%",height:200,children:e.jsxs($e,{data:te,layout:"vertical",children:[e.jsx(E,{strokeDasharray:"3 3",stroke:r.border}),e.jsx(_,{type:"number",domain:[0,100],tick:{fill:r.textSecondary,fontSize:10}}),e.jsx(L,{dataKey:"map",type:"category",tick:{fill:r.textSecondary,fontSize:10},width:60}),e.jsx(G,{contentStyle:{backgroundColor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:8},formatter:t=>[`${t}%`,"Win Rate"]}),e.jsx(Fe,{dataKey:"winRate",fill:r.accent,radius:[0,4,4,0]})]})})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(v,{sx:{bgcolor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:2,p:3},children:[e.jsxs(o,{variant:"h6",sx:{color:r.textPrimary,mb:3},children:[e.jsx(k,{sx:{mr:1,verticalAlign:"middle",color:r.accent}}),"Achievements"]}),e.jsx(x,{container:!0,spacing:2,children:F.map(t=>e.jsx(x,{item:!0,xs:6,sm:4,md:3,lg:2,children:e.jsx(tr,{achievement:t,unlocked:R.has(t.id)})},t.id))})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(v,{sx:{bgcolor:r.bgCard,border:`1px solid ${r.border}`,borderRadius:2,p:3},children:[e.jsxs(o,{variant:"h6",sx:{color:r.textPrimary,mb:3},children:[e.jsx(B,{sx:{mr:1,verticalAlign:"middle",color:"#ef4444"}}),"Favorite Matches (",w.length,")"]}),w.length===0?e.jsxs(l,{sx:{textAlign:"center",py:4},children:[e.jsx(Ae,{sx:{fontSize:48,color:r.textSecondary,mb:2}}),e.jsx(o,{sx:{color:r.textSecondary},children:"No favorites yet. Click the heart icon on matches to save them here!"})]}):e.jsx(Ve,{children:e.jsxs(Oe,{size:"small",children:[e.jsx(Ye,{children:e.jsxs(U,{children:[e.jsx(y,{sx:{color:r.textSecondary,borderColor:r.border},children:"Date"}),e.jsx(y,{sx:{color:r.textSecondary,borderColor:r.border},children:"Teams"}),e.jsx(y,{sx:{color:r.textSecondary,borderColor:r.border},children:"Map"}),e.jsx(y,{sx:{color:r.textSecondary,borderColor:r.border},align:"center",children:"Remove"})]})}),e.jsx(Ne,{children:w.map(t=>{var i;return e.jsxs(U,{onClick:()=>oe(t),sx:{cursor:"pointer","&:hover":{bgcolor:r.bgHover},borderBottom:`1px solid ${r.border}`},children:[e.jsx(y,{sx:{color:r.textPrimary,borderColor:r.border},children:t.date}),e.jsx(y,{sx:{color:r.textPrimary,fontWeight:600,borderColor:r.border},children:se(t.url)}),e.jsx(y,{sx:{borderColor:r.border},children:e.jsx(o,{sx:{color:r.accent,fontWeight:700,textTransform:"uppercase",letterSpacing:1},children:(i=t.map)==null?void 0:i.replace("de_","").replace("cs_","")})}),e.jsx(y,{align:"center",sx:{borderColor:r.border},children:e.jsx(X,{title:"Remove from favorites",children:e.jsx(Se,{onClick:a=>ae(a,t.matchid),size:"small",sx:{color:"#ef4444","&:hover":{bgcolor:"rgba(239,68,68,0.2)"}},children:e.jsx(B,{})})})})]},t.matchid)})})]})})]})})]}):e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"40vh"},children:n?u?e.jsx(ve,{sx:{color:r.accent}}):e.jsxs(T,{severity:"info",children:['No player data found for "',n.username,'". Contact admin to add your alias.']}):e.jsx(T,{severity:"warning",children:"Please log in to view your stats"})}),e.jsxs(Pe,{open:Z,onClose:K,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{bgcolor:r.bgCard,border:`1px solid ${r.border}`}},children:[e.jsx(Re,{sx:{color:r.accent,textTransform:"uppercase",letterSpacing:2},children:"Match Details"}),e.jsx(we,{children:P?e.jsx(ze,{matchId:P.matchid,url:P.url}):e.jsx(o,{variant:"body1",sx:{color:r.textSecondary},children:"Loading match details..."})}),e.jsx(De,{sx:{borderTop:`1px solid ${r.border}`},children:e.jsx(Xe,{onClick:K,sx:{color:r.accent},children:"Close"})})]})]}):e.jsx(l,{sx:{p:4,textAlign:"center"},children:e.jsx(T,{severity:"info",children:"Please log in to view your stats dashboard."})})}export{gr as default};
