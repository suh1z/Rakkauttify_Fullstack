import{aC as l,t as L,j as t,az as T,i as q,k as D,r as a,o as N,m as g,P as R,T as f,C as B,ae as E,aA as F}from"./index-B0EjU0T6.js";import{A}from"./Alert-DDf0iX_E.js";import{T as p,A as G,B as J}from"./TextField-DerlLcSb.js";import"./useSlot-B2tjbNde.js";import"./Close-u73Ees4k.js";import"./Select-BU8TMG6z.js";import"./Popper-DGTkPrL7.js";const i="/api/users",u=()=>{const o=window.localStorage.getItem("loggedInUser");return o?{headers:{Authorization:`Bearer ${JSON.parse(o).token}`}}:{}},Z=async()=>(await l.get(i,u())).data,K=async o=>(await l.post(i,o)).data,Q=async o=>(await l.get(`${i}/${o}`,u())).data,V=async()=>(await l.get(`${i}/me/profile`,u())).data,X=async o=>(await l.put(`${i}/me/profile`,o,u())).data,Y=async o=>(await l.post(`${i}/me/achievements`,o,u())).data,_=async o=>(await l.put(`${i}/me/personal-bests`,o,u())).data,ee={getAllUsers:Z,createUser:K,findUser:Q,getMyProfile:V,updateMyProfile:X,unlockAchievement:Y,updatePersonalBests:_},te=L(t.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),re=L(t.jsx("path",{d:"m21.58 16.09-1.09-7.66C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.43l-1.09 7.66C2.2 17.63 3.39 19 4.94 19c.68 0 1.32-.27 1.8-.75L9 16h6l2.25 2.25c.48.48 1.13.75 1.8.75 1.56 0 2.75-1.37 2.53-2.91M11 11H9v2H8v-2H6v-1h2V8h1v2h2zm4-1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"SportsEsports"),e={bgDark:"#0d0d0d",bgCard:"#1a1a1a",accent:"#de6c2c",accentHover:"#ff7c3c",textPrimary:"#e5e5e5",textSecondary:"#888888",border:"rgba(255,255,255,0.08)",green:"#4ade80",red:"#ef4444"},de=()=>{const o=T(),n=q(),b=D(r=>r.stats.players),[m,y]=a.useState(""),[x,v]=a.useState(""),[c,k]=a.useState(""),[C,$]=a.useState(""),[h,H]=a.useState(""),[M,s]=a.useState(""),[S,P]=a.useState(""),[j,I]=a.useState(!1);a.useEffect(()=>{n(N())},[n]);const z=(r,d)=>{d?(y(d.nickname),x||v(d.nickname)):y("")},U=async r=>{var d,w;if(r.preventDefault(),s(""),P(""),!m||!x||!c||!h){s("All fields are required");return}if(m.length<3){s("Username must be at least 3 characters");return}if(c.length<8){s("Password must be at least 8 characters");return}if(c!==C){s("Passwords do not match");return}if(!/[A-Z]/.test(c)){s("Password must contain at least one uppercase letter");return}if(!/[a-z]/.test(c)){s("Password must contain at least one lowercase letter");return}if(!/[0-9]/.test(c)){s("Password must contain at least one number");return}I(!0);try{await ee.createUser({username:m,name:x,password:c,inviteCode:h}),P("Account created successfully! Redirecting to login..."),setTimeout(()=>o("/login"),2e3)}catch(W){const O=((w=(d=W.response)==null?void 0:d.data)==null?void 0:w.error)||"Registration failed";s(O)}finally{I(!1)}};return t.jsx(g,{sx:{minHeight:"100vh",bgcolor:e.bgDark,display:"flex",justifyContent:"center",alignItems:"center",p:2},children:t.jsxs(R,{sx:{bgcolor:e.bgCard,border:`1px solid ${e.border}`,borderRadius:2,p:4,maxWidth:400,width:"100%"},children:[t.jsxs(g,{sx:{textAlign:"center",mb:3},children:[t.jsx(te,{sx:{fontSize:48,color:e.accent,mb:1}}),t.jsx(f,{variant:"h4",sx:{color:e.textPrimary,fontWeight:700},children:"Create Account"}),t.jsx(f,{variant:"body2",sx:{color:e.textSecondary,mt:1},children:"Select your inhouse nickname to register"}),t.jsx(B,{icon:t.jsx(re,{sx:{color:e.accent}}),label:"Must have played at least 1 match",size:"small",sx:{mt:1,bgcolor:`${e.accent}15`,color:e.accent,borderColor:e.accent,"& .MuiChip-icon":{color:e.accent}},variant:"outlined"})]}),M&&t.jsx(A,{severity:"error",sx:{mb:2,bgcolor:"rgba(239,68,68,0.1)",color:e.red},children:M}),S&&t.jsx(A,{severity:"success",sx:{mb:2,bgcolor:"rgba(74,222,128,0.1)",color:e.green},children:S}),t.jsxs("form",{onSubmit:U,children:[t.jsx(p,{fullWidth:!0,label:"Invite Code",value:h,onChange:r=>H(r.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),t.jsx(G,{fullWidth:!0,options:b||[],getOptionLabel:r=>r.nickname||"",value:(b==null?void 0:b.find(r=>r.nickname===m))||null,onChange:z,renderInput:r=>t.jsx(p,{...r,label:"Inhouse Nickname",placeholder:"Search your nickname...",required:!0,sx:{"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}}}),sx:{mb:2,"& .MuiAutocomplete-popupIndicator":{color:e.textSecondary},"& .MuiAutocomplete-clearIndicator":{color:e.textSecondary}},slotProps:{paper:{sx:{bgcolor:e.bgCard,border:`1px solid ${e.border}`,"& .MuiAutocomplete-option":{color:e.textPrimary,"&:hover":{bgcolor:`${e.accent}20`},'&[aria-selected="true"]':{bgcolor:`${e.accent}30`}}}}},noOptionsText:t.jsx(f,{sx:{color:e.textSecondary},children:"No players found (play a match first!)"})}),t.jsx(p,{fullWidth:!0,label:"Display Name",value:x,onChange:r=>v(r.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),t.jsx(p,{fullWidth:!0,type:"password",label:"Password",value:c,onChange:r=>k(r.target.value),helperText:"Min 8 chars, uppercase, lowercase, number",sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent},"& .MuiFormHelperText-root":{color:e.textSecondary}},required:!0}),t.jsx(p,{fullWidth:!0,type:"password",label:"Confirm Password",value:C,onChange:r=>$(r.target.value),sx:{mb:3,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),t.jsx(J,{type:"submit",fullWidth:!0,variant:"contained",disabled:j,sx:{bgcolor:e.accent,color:"#fff",py:1.5,fontWeight:600,"&:hover":{bgcolor:e.accentHover},"&.Mui-disabled":{bgcolor:e.border,color:e.textSecondary}},children:j?t.jsx(E,{size:24,sx:{color:"#fff"}}):"Create Account"})]}),t.jsx(g,{sx:{mt:3,textAlign:"center"},children:t.jsxs(f,{variant:"body2",sx:{color:e.textSecondary},children:["Already have an account?"," ",t.jsx(F,{to:"/login",style:{color:e.accent,textDecoration:"none"},children:"Login here"})]})})]})})};export{de as default};
