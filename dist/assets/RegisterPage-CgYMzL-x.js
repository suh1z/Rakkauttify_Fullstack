import{k as P,j as r,Y as z,u as O,a as q,r as a,b as D,B as x,P as R,T as u,C as E,a0 as N,Z as $,d as B}from"./index-CTDm1AW-.js";import{A as j}from"./Alert-D9APkT5z.js";import{T as n,A as U,B as F}from"./TextField-BcQyfcts.js";import"./useSlot-iAVGiLGH.js";import"./Select-BdX5m7oo.js";const Z=P(r.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),G=P(r.jsx("path",{d:"m21.58 16.09-1.09-7.66C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.43l-1.09 7.66C2.2 17.63 3.39 19 4.94 19c.68 0 1.32-.27 1.8-.75L9 16h6l2.25 2.25c.48.48 1.13.75 1.8.75 1.56 0 2.75-1.37 2.53-2.91M11 11H9v2H8v-2H6v-1h2V8h1v2h2zm4-1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"SportsEsports"),e={bgDark:"#0d0d0d",bgCard:"#1a1a1a",accent:"#de6c2c",accentHover:"#ff7c3c",textPrimary:"#e5e5e5",textSecondary:"#888888",border:"rgba(255,255,255,0.08)",green:"#4ade80",red:"#ef4444"},X=()=>{const I=z(),m=O(),l=q(t=>t.stats.players),[i,f]=a.useState(""),[d,p]=a.useState(""),[s,A]=a.useState(""),[h,w]=a.useState(""),[b,L]=a.useState(""),[g,o]=a.useState(""),[v,y]=a.useState(""),[C,M]=a.useState(!1);a.useEffect(()=>{m(D())},[m]);const k=(t,c)=>{c?(f(c.nickname),d||p(c.nickname)):f("")},H=async t=>{var c,S;if(t.preventDefault(),o(""),y(""),!i||!d||!s||!b){o("All fields are required");return}if(i.length<3){o("Username must be at least 3 characters");return}if(s.length<8){o("Password must be at least 8 characters");return}if(s!==h){o("Passwords do not match");return}if(!/[A-Z]/.test(s)){o("Password must contain at least one uppercase letter");return}if(!/[a-z]/.test(s)){o("Password must contain at least one lowercase letter");return}if(!/[0-9]/.test(s)){o("Password must contain at least one number");return}M(!0);try{await B.createUser({username:i,name:d,password:s,inviteCode:b}),y("Account created successfully! Redirecting to login..."),setTimeout(()=>I("/login"),2e3)}catch(W){const T=((S=(c=W.response)==null?void 0:c.data)==null?void 0:S.error)||"Registration failed";o(T)}finally{M(!1)}};return r.jsx(x,{sx:{minHeight:"100vh",bgcolor:e.bgDark,display:"flex",justifyContent:"center",alignItems:"center",p:2},children:r.jsxs(R,{sx:{bgcolor:e.bgCard,border:`1px solid ${e.border}`,borderRadius:2,p:4,maxWidth:400,width:"100%"},children:[r.jsxs(x,{sx:{textAlign:"center",mb:3},children:[r.jsx(Z,{sx:{fontSize:48,color:e.accent,mb:1}}),r.jsx(u,{variant:"h4",sx:{color:e.textPrimary,fontWeight:700},children:"Create Account"}),r.jsx(u,{variant:"body2",sx:{color:e.textSecondary,mt:1},children:"Select your inhouse nickname to register"}),r.jsx(E,{icon:r.jsx(G,{sx:{color:e.accent}}),label:"Must have played at least 1 match",size:"small",sx:{mt:1,bgcolor:`${e.accent}15`,color:e.accent,borderColor:e.accent,"& .MuiChip-icon":{color:e.accent}},variant:"outlined"})]}),g&&r.jsx(j,{severity:"error",sx:{mb:2,bgcolor:"rgba(239,68,68,0.1)",color:e.red},children:g}),v&&r.jsx(j,{severity:"success",sx:{mb:2,bgcolor:"rgba(74,222,128,0.1)",color:e.green},children:v}),r.jsxs("form",{onSubmit:H,children:[r.jsx(n,{fullWidth:!0,label:"Invite Code",value:b,onChange:t=>L(t.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),r.jsx(U,{fullWidth:!0,options:l||[],getOptionLabel:t=>t.nickname||"",value:(l==null?void 0:l.find(t=>t.nickname===i))||null,onChange:k,renderInput:t=>r.jsx(n,{...t,label:"Inhouse Nickname",placeholder:"Search your nickname...",required:!0,sx:{"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}}}),sx:{mb:2,"& .MuiAutocomplete-popupIndicator":{color:e.textSecondary},"& .MuiAutocomplete-clearIndicator":{color:e.textSecondary}},slotProps:{paper:{sx:{bgcolor:e.bgCard,border:`1px solid ${e.border}`,"& .MuiAutocomplete-option":{color:e.textPrimary,"&:hover":{bgcolor:`${e.accent}20`},'&[aria-selected="true"]':{bgcolor:`${e.accent}30`}}}}},noOptionsText:r.jsx(u,{sx:{color:e.textSecondary},children:"No players found (play a match first!)"})}),r.jsx(n,{fullWidth:!0,label:"Display Name",value:d,onChange:t=>p(t.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),r.jsx(n,{fullWidth:!0,type:"password",label:"Password",value:s,onChange:t=>A(t.target.value),helperText:"Min 8 chars, uppercase, lowercase, number",sx:{mb:2,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent},"& .MuiFormHelperText-root":{color:e.textSecondary}},required:!0}),r.jsx(n,{fullWidth:!0,type:"password",label:"Confirm Password",value:h,onChange:t=>w(t.target.value),sx:{mb:3,"& .MuiOutlinedInput-root":{color:e.textPrimary,"& fieldset":{borderColor:e.border},"&:hover fieldset":{borderColor:e.accent},"&.Mui-focused fieldset":{borderColor:e.accent}},"& .MuiInputLabel-root":{color:e.textSecondary},"& .MuiInputLabel-root.Mui-focused":{color:e.accent}},required:!0}),r.jsx(F,{type:"submit",fullWidth:!0,variant:"contained",disabled:C,sx:{bgcolor:e.accent,color:"#fff",py:1.5,fontWeight:600,"&:hover":{bgcolor:e.accentHover},"&.Mui-disabled":{bgcolor:e.border,color:e.textSecondary}},children:C?r.jsx(N,{size:24,sx:{color:"#fff"}}):"Create Account"})]}),r.jsx(x,{sx:{mt:3,textAlign:"center"},children:r.jsxs(u,{variant:"body2",sx:{color:e.textSecondary},children:["Already have an account?"," ",r.jsx($,{to:"/login",style:{color:e.accent,textDecoration:"none"},children:"Login here"})]})})]})})};export{X as default};
