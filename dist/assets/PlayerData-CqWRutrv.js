import{r as X,R as b,f as Z,k as mt,l as tt,p as yt,j as c,n as V,T as O,P as K,t as et,v as vt}from"./index-6bpq1gXI.js";import{C as bt,F as xt,I as gt,S as At,G as rt,b as Pt,c as St,D as jt}from"./DataGrid-DaT15woA.js";import{a as Dt,g as st,b as nt,i as q,u as Ot,c as Ct,D as wt,f as kt,E as Et,L as Y,d as z,C as _t,A as It,e as $,h as Lt,j as Tt,k as Nt,l as Mt,X as lt,Y as ct,m as Wt,R as Ft,T as $t,G as Rt}from"./generateCategoricalChart-YPdEnS0l.js";import{C as Bt}from"./CartesianGrid-CV_jJAo2.js";var Gt=["type","layout","connectNulls","ref"],Kt=["key"];function _(t){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_(t)}function at(t,n){if(t==null)return{};var r=zt(t,n),e,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)e=l[a],!(n.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(r[e]=t[e])}return r}function zt(t,n){if(t==null)return{};var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){if(n.indexOf(e)>=0)continue;r[e]=t[e]}return r}function R(){return R=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},R.apply(this,arguments)}function it(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,e)}return r}function g(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?it(Object(r),!0).forEach(function(e){P(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function E(t){return Yt(t)||Vt(t)||Ut(t)||Ht()}function Ht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ut(t,n){if(t){if(typeof t=="string")return Q(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(t,n)}}function Vt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yt(t){if(Array.isArray(t))return Q(t)}function Q(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function Xt(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function ot(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,dt(e.key),e)}}function qt(t,n,r){return ot(t.prototype,n),ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qt(t,n,r){return n=H(n),Jt(t,ut()?Reflect.construct(n,r,H(t).constructor):n.apply(t,r))}function Jt(t,n){if(n&&(_(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zt(t)}function Zt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ut(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ut=function(){return!!t})()}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H(t)}function te(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&J(t,n)}function J(t,n){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e},J(t,n)}function P(t,n,r){return n=dt(n),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function dt(t){var n=ee(t,"string");return _(n)=="symbol"?n:n+""}function ee(t,n){if(_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var e=r.call(t,n||"default");if(_(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var I=function(t){function n(){var r;Xt(this,n);for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return r=Qt(this,n,[].concat(a)),P(r,"state",{isAnimationFinished:!0,totalLength:0}),P(r,"generateSimpleStrokeDasharray",function(o,u){return"".concat(u,"px ").concat(o-u,"px")}),P(r,"getStrokeDasharray",function(o,u,h){var f=h.reduce(function(S,D){return S+D});if(!f)return r.generateSimpleStrokeDasharray(u,o);for(var y=Math.floor(o/f),d=o%f,p=u-o,m=[],s=0,v=0;s<h.length;v+=h[s],++s)if(v+h[s]>d){m=[].concat(E(h.slice(0,s)),[d-v]);break}var A=m.length%2===0?[0,p]:[p];return[].concat(E(n.repeat(h,y)),E(m),A).map(function(S){return"".concat(S,"px")}).join(", ")}),P(r,"id",Ot("recharts-line-")),P(r,"pathRef",function(o){r.mainCurve=o}),P(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),P(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return te(n,t),qt(n,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(e,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,o=l.points,u=l.xAxis,h=l.yAxis,f=l.layout,y=l.children,d=kt(y,Et);if(!d)return null;var p=function(v,A){return{x:v.x,y:v.y,value:v.value,errorVal:st(v.payload,A)}},m={clipPath:e?"url(#clipPath-".concat(a,")"):null};return b.createElement(Y,m,d.map(function(s){return b.cloneElement(s,{key:"bar-".concat(s.props.dataKey),data:o,xAxis:u,yAxis:h,layout:f,dataPointFormatter:p})}))}},{key:"renderDots",value:function(e,a,l){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var u=this.props,h=u.dot,f=u.points,y=u.dataKey,d=z(this.props,!1),p=z(h,!0),m=f.map(function(v,A){var S=g(g(g({key:"dot-".concat(A),r:3},d),p),{},{value:v.value,dataKey:y,cx:v.x,cy:v.y,index:A,payload:v.payload});return n.renderDotItem(h,S)}),s={clipPath:e?"url(#clipPath-".concat(a?"":"dots-").concat(l,")"):null};return b.createElement(Y,R({className:"recharts-line-dots",key:"dots"},s),m)}},{key:"renderCurveStatically",value:function(e,a,l,o){var u=this.props,h=u.type,f=u.layout,y=u.connectNulls;u.ref;var d=at(u,Gt),p=g(g(g({},z(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(l,")"):null,points:e},o),{},{type:h,layout:f,connectNulls:y});return b.createElement(_t,R({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,a){var l=this,o=this.props,u=o.points,h=o.strokeDasharray,f=o.isAnimationActive,y=o.animationBegin,d=o.animationDuration,p=o.animationEasing,m=o.animationId,s=o.animateNewValues,v=o.width,A=o.height,S=this.state,D=S.prevPoints,L=S.totalLength;return b.createElement(It,{begin:y,duration:d,isActive:f,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var j=w.t;if(D){var T=D.length/u.length,C=u.map(function(x,U){var W=Math.floor(U*T);if(D[W]){var F=D[W],k=$(F.x,x.x),pt=$(F.y,x.y);return g(g({},x),{},{x:k(j),y:pt(j)})}if(s){var ht=$(v*2,x.x),ft=$(A/2,x.y);return g(g({},x),{},{x:ht(j),y:ft(j)})}return g(g({},x),{},{x:x.x,y:x.y})});return l.renderCurveStatically(C,e,a)}var B=$(0,L),N=B(j),M;if(h){var G="".concat(h).split(/[,\s]+/gim).map(function(x){return parseFloat(x)});M=l.getStrokeDasharray(N,L,G)}else M=l.generateSimpleStrokeDasharray(L,N);return l.renderCurveStatically(u,e,a,{strokeDasharray:M})})}},{key:"renderCurve",value:function(e,a){var l=this.props,o=l.points,u=l.isAnimationActive,h=this.state,f=h.prevPoints,y=h.totalLength;return u&&o&&o.length&&(!f&&y>0||!Lt(f,o))?this.renderCurveWithAnimation(e,a):this.renderCurveStatically(o,e,a)}},{key:"render",value:function(){var e,a=this.props,l=a.hide,o=a.dot,u=a.points,h=a.className,f=a.xAxis,y=a.yAxis,d=a.top,p=a.left,m=a.width,s=a.height,v=a.isAnimationActive,A=a.id;if(l||!u||!u.length)return null;var S=this.state.isAnimationFinished,D=u.length===1,L=Z("recharts-line",h),w=f&&f.allowDataOverflow,j=y&&y.allowDataOverflow,T=w||j,C=q(A)?this.id:A,B=(e=z(o,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},N=B.r,M=N===void 0?3:N,G=B.strokeWidth,x=G===void 0?2:G,U=Tt(o)?o:{},W=U.clipDot,F=W===void 0?!0:W,k=M*2+x;return b.createElement(Y,{className:L},w||j?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(C)},b.createElement("rect",{x:w?p:p-m/2,y:j?d:d-s/2,width:w?m:m*2,height:j?s:s*2})),!F&&b.createElement("clipPath",{id:"clipPath-dots-".concat(C)},b.createElement("rect",{x:p-k/2,y:d-k/2,width:m+k,height:s+k}))):null,!D&&this.renderCurve(T,C),this.renderErrorBar(T,C),(D||o)&&this.renderDots(T,F,C),(!v||S)&&Nt.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.animationId!==a.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:a.curPoints}:e.points!==a.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,a){for(var l=e.length%2!==0?[].concat(E(e),[0]):e,o=[],u=0;u<a;++u)o=[].concat(E(o),E(l));return o}},{key:"renderDotItem",value:function(e,a){var l;if(b.isValidElement(e))l=b.cloneElement(e,a);else if(Ct(e))l=e(a);else{var o=a.key,u=at(a,Kt),h=Z("recharts-line-dot",typeof e!="boolean"?e.className:"");l=b.createElement(wt,R({key:o},u,{className:h}))}return l}}])}(X.PureComponent);P(I,"displayName","Line");P(I,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Dt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});P(I,"getComposedData",function(t){var n=t.props,r=t.xAxis,e=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,o=t.dataKey,u=t.bandSize,h=t.displayedData,f=t.offset,y=n.layout,d=h.map(function(p,m){var s=st(p,o);return y==="horizontal"?{x:nt({axis:r,ticks:a,bandSize:u,entry:p,index:m}),y:q(s)?null:e.scale(s),value:s,payload:p}:{x:q(s)?null:r.scale(s),y:nt({axis:e,ticks:l,bandSize:u,entry:p,index:m}),value:s,payload:p}});return g({points:d,layout:y},f)});var re=Mt({chartName:"LineChart",GraphicalChild:I,axisComponents:[{axisType:"xAxis",AxisComp:lt},{axisType:"yAxis",AxisComp:ct}],formatAxisMap:Wt});const i={bgDark:"#0d0d0d",bgCard:"#1a1a1a",bgHover:"#252525",accent:"#de6c2c",accentSecondary:"#4ade80",textPrimary:"#e5e5e5",textSecondary:"#888888",border:"rgba(255,255,255,0.08)"},se=()=>{const t=mt(),n=tt(d=>d.stats.players),r=tt(d=>d.stats.playerStats),[e,a]=X.useState(""),l=Array.isArray(r==null?void 0:r.details)?[...r.details]:[],o=[...l].sort((d,p)=>new Date(d.date)-new Date(p.date));X.useEffect(()=>{t(yt())},[]);const u=d=>{const p=d.target.value;a(p),p&&t(vt(p))},h=[];if(l.length>0){const d=l[0],p=Object.keys(d),m=["date","map","score","win"];m.forEach(s=>{p.includes(s)&&h.push({field:s,headerName:s.charAt(0).toUpperCase()+s.slice(1),width:s==="date"?180:100,type:s==="win"?"boolean":"string",flex:s==="map"?1:0})}),p.forEach(s=>{m.includes(s)||h.push({field:s,headerName:s.charAt(0).toUpperCase()+s.slice(1),width:110,type:typeof d[s]=="number"?"number":"string"})})}const f=l.map((d,p)=>({id:p,...d})),y=({active:d,payload:p,label:m})=>d&&p&&p.length?c.jsxs(V,{sx:{bgcolor:i.bgCard,p:1.5,border:`1px solid ${i.border}`},children:[c.jsx(O,{sx:{color:i.textPrimary,fontWeight:600,mb:.5},children:m}),p.map((s,v)=>c.jsxs(O,{sx:{color:s.color},children:[s.name,": ",s.value]},v))]}):null;return c.jsx(V,{sx:{minHeight:"100vh",bgcolor:i.bgDark,color:i.textPrimary},children:c.jsxs(bt,{maxWidth:"xl",sx:{pt:4,pb:4},children:[c.jsxs(V,{sx:{mb:4},children:[c.jsx(O,{variant:"overline",sx:{color:i.accent,letterSpacing:3,fontWeight:"bold"},children:"INDIVIDUAL TRACKING"}),c.jsx(O,{variant:"h3",sx:{fontWeight:800,color:i.textPrimary},children:"Player Statistics"})]}),c.jsx(K,{sx:{p:3,mb:3,bgcolor:i.bgCard,border:`1px solid ${i.border}`},children:c.jsxs(xt,{fullWidth:!0,sx:{maxWidth:300},children:[c.jsx(gt,{id:"player-select-label",sx:{color:i.textSecondary},children:"Select Player"}),c.jsxs(At,{labelId:"player-select-label",value:e,onChange:u,label:"Select Player",sx:{color:i.textPrimary,"& .MuiOutlinedInput-notchedOutline":{borderColor:i.border},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:i.accent},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:i.accent},"& .MuiSvgIcon-root":{color:i.textSecondary}},MenuProps:{PaperProps:{sx:{bgcolor:i.bgCard,border:`1px solid ${i.border}`}}},children:[c.jsx(et,{value:"",sx:{color:i.textSecondary},children:c.jsx("em",{children:"-- Select a Player --"})}),n.map(d=>c.jsx(et,{value:d.nickname,sx:{color:i.textPrimary,"&:hover":{bgcolor:i.bgHover}},children:d.nickname},d.nickname))]})]})}),e&&o.length>0&&c.jsx(rt,{container:!0,spacing:3,sx:{mb:3},children:c.jsx(rt,{item:!0,xs:12,children:c.jsx(Pt,{sx:{bgcolor:i.bgCard,border:`1px solid ${i.border}`},children:c.jsxs(St,{children:[c.jsx(O,{variant:"overline",sx:{color:i.accent,letterSpacing:2},children:"TREND ANALYSIS"}),c.jsx(O,{variant:"h6",sx:{color:i.textPrimary,mb:2},children:"Performance Trends (Kills/Deaths)"}),c.jsx(Ft,{width:"100%",height:300,children:c.jsxs(re,{data:o,children:[c.jsx(Bt,{strokeDasharray:"3 3",stroke:i.border}),c.jsx(lt,{dataKey:"date",tick:{fill:i.textSecondary,fontSize:12}}),c.jsx(ct,{tick:{fill:i.textSecondary}}),c.jsx($t,{content:c.jsx(y,{})}),c.jsx(I,{type:"monotone",dataKey:"kills",stroke:i.accent,name:"Kills",activeDot:{r:8},strokeWidth:2}),c.jsx(I,{type:"monotone",dataKey:"deaths",stroke:i.accentSecondary,name:"Deaths",strokeWidth:2})]})})]})})})}),e&&f.length>0?c.jsxs(c.Fragment,{children:[c.jsx(O,{variant:"overline",sx:{color:i.accent,letterSpacing:2,fontWeight:600,mb:2,display:"block"},children:"MATCH HISTORY"}),c.jsx(K,{sx:{height:700,width:"100%",p:1,bgcolor:i.bgCard,border:`1px solid ${i.border}`},children:c.jsx(jt,{rows:f,columns:h,slots:{toolbar:Rt},slotProps:{toolbar:{showQuickFilter:!0}},initialState:{pagination:{paginationModel:{pageSize:25,page:0}},sorting:{sortModel:[{field:"date",sort:"desc"}]}},pageSizeOptions:[10,25,50,100],disableRowSelectionOnClick:!0,sx:{border:0,color:i.textPrimary,"& .MuiDataGrid-row:hover":{backgroundColor:i.bgHover},"& .MuiDataGrid-columnHeaders":{backgroundColor:i.bgDark,fontWeight:"bold",color:i.textSecondary},"& .MuiDataGrid-cell":{borderColor:i.border},"& .MuiDataGrid-footerContainer":{borderColor:i.border},"& .MuiTablePagination-root":{color:i.textSecondary},"& .MuiIconButton-root":{color:i.textSecondary},"& .MuiDataGrid-toolbarContainer":{color:i.textSecondary,"& .MuiButton-root":{color:i.accent}}}})})]}):e?c.jsx(K,{sx:{p:3,bgcolor:i.bgCard,border:`1px solid ${i.border}`},children:c.jsxs(O,{variant:"body1",sx:{color:i.textSecondary},children:["No match data available for ",e,"."]})}):c.jsx(K,{sx:{p:3,bgcolor:i.bgCard,border:`1px solid ${i.border}`},children:c.jsx(O,{variant:"body1",sx:{color:i.textSecondary},children:"Select a player above to view their match history."})})]})})};export{se as default};
